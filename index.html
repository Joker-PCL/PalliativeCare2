<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <base target="_top" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kodchasan:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script>

    <!-- Data tables -->
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.dataTables.css" />
    <script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>

    <!-- MCDatepicker -->
    <link href="https://cdn.jsdelivr.net/npm/mc-datepicker/dist/mc-calendar.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/mc-datepicker/dist/mc-calendar.min.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="style2.css" />
    <link rel="stylesheet" href="table.css" />
  </head>

  <body>
    <div id="mainContent">
      <!-- แถบนำทาง, เมนู -->
      <div class="sidebar position-fixed top-0 bottom-0 bg-white border-end">
        <div class="d-flex align-items-center pt-3 px-3">
          <a class="navbar-brand text-uppercase">
            <img src="https://lh5.googleusercontent.com/d/1ybmhWW4uQhjBZyn97ahAMnmI2XTB8bIG" alt="Bootstrap" width="50" height="50" />
            <span class="sidebar-dropdown-menu-text">Pilliative Care</span>
          </a>
          <i class="sidebar-toggle ri-arrow-left-circle-line ms-auto fs-2 d-none d-md-block"></i>
        </div>
        <ul class="sidebar-menu p-3 m-0 mb-0">
          <!-- หน้าหลัก -->
          <li class="sidebar-menu-item has-dropdown active list-menu-page" data-main-page-id="homepage">
            <a href="#">
              <i class="bi bi-house-door-fill sidebar-menu-item-icon"></i>
              <span class="sidebar-dropdown-menu-text">หน้าหลัก</span>
            </a>
          </li>
          <li class="sidebar-menu-divider mt-3 mb-1 text-uppercase">รายการบันทึก</li>

          <section class="section-user-data">
            <!-- ข้อมูลผู้ป่วย -->
            <li class="sidebar-menu-item has-dropdown mb-2">
              <a href="#">
                <i class="bi bi-person-lines-fill sidebar-menu-item-icon"></i>
                <span class="sidebar-dropdown-menu-text">ข้อมูลผู้ป่วย</span>
                <i class="ri-arrow-down-s-line sidebar-menu-item-accordion ms-auto"></i>
              </a>
              <ul class="sidebar-dropdown-menu" style="display: none">
                <li
                  class="sidebar-dropdown-menu-item list-menu-page"
                  data-main-page-id="patientInformation"
                  data-child-page-id="patientInformation_1"
                >
                  <a href="#"> ข้อมูลทั่วไป </a>
                </li>
                <li
                  class="sidebar-dropdown-menu-item list-menu-page"
                  data-main-page-id="patientInformation"
                  data-child-page-id="patientInformation_2"
                >
                  <a href="#"> Consult for </a>
                </li>
                <li
                  class="sidebar-dropdown-menu-item list-menu-page"
                  data-main-page-id="patientInformation"
                  data-child-page-id="patientInformation_3"
                >
                  <a href="#"> ข้อมูลสภาวะสุขภาพ </a>
                </li>
              </ul>
            </li>
            <!-- การดูแลรักษา -->
            <li class="sidebar-menu-item has-dropdown mb-2">
              <a href="#">
                <i class="bi bi-clipboard2-pulse-fill sidebar-menu-item-icon"></i>
                <span class="sidebar-dropdown-menu-text">การดูแลรักษา</span>
                <i class="ri-arrow-down-s-line sidebar-menu-item-accordion ms-auto"></i>
              </a>
              <ul class="sidebar-dropdown-menu" style="display: none">
                <li class="sidebar-dropdown-menu-item list-menu-page" data-main-page-id="treatment" data-child-page-id="treatment_1">
                  <a href="#">Family meeting, Advance care plan</a>
                </li>
                <li class="sidebar-dropdown-menu-item list-menu-page" data-main-page-id="treatment" data-child-page-id="treatment_2">
                  <a href="#">Treatment</a>
                </li>
                <li class="sidebar-dropdown-menu-item list-menu-page" data-main-page-id="treatment" data-child-page-id="treatment_3">
                  <a href="#">Education&training programs</a>
                </li>
              </ul>
            </li>
            <!-- วางแผนจำหน่าย  -->
            <li class="sidebar-menu-item has-dropdown mb-2">
              <a href="#">
                <i class="bi bi-calendar-week sidebar-menu-item-icon"></i>
                <span class="sidebar-dropdown-menu-text">วางแผนจำหน่าย </span>
                <i class="ri-arrow-down-s-line sidebar-menu-item-accordion ms-auto"></i>
              </a>
              <ul class="sidebar-dropdown-menu" style="display: none">
                <li class="sidebar-dropdown-menu-item list-menu-page" data-main-page-id="planning" data-child-page-id="planning_1">
                  <a href="#">ติดตามประเมินอาการ, ให้คำปรึกษาตลอด 24 ชม.</a>
                </li>
                <li class="sidebar-dropdown-menu-item list-menu-page" data-main-page-id="planning" data-child-page-id="planning_2">
                  <a href="#">เยี่ยมบ้าน,ส่งต่อเครือข่าย</a>
                </li>
              </ul>
            </li>
            <!-- การดูแลหลังเสียชีวิต   -->
            <li class="sidebar-menu-item has-dropdown mb-2">
              <a href="#">
                <i class="bi bi-search-heart sidebar-menu-item-icon"></i>
                <span class="sidebar-dropdown-menu-text">การดูแลหลังเสียชีวิต</span>
                <i class="ri-arrow-down-s-line sidebar-menu-item-accordion ms-auto"></i>
              </a>
              <ul class="sidebar-dropdown-menu" style="display: none">
                <li class="sidebar-dropdown-menu-item list-menu-page" data-main-page-id="bereavementCare" data-child-page-id="bereavementCare_1">
                  <a href="#">ประเมิน 2Q,9Q,8Q,BGQ good death,ความพึงพอใจ</a>
                </li>
              </ul>
            </li>
          </section>
          <!-- จัดการระบบ (Admin) -->
          <li id="adminMenu" class="sidebar-menu-item has-dropdown mb-2 admin-only">
            <a href="#">
              <i class="bi bi-person-fill-gear sidebar-menu-item-icon"></i>
              <span class="sidebar-dropdown-menu-text">จัดการระบบ (Admin)</span>
              <i class="ri-arrow-down-s-line sidebar-menu-item-accordion ms-auto"></i>
            </a>
            <ul class="sidebar-dropdown-menu" style="display: none">
              <li class="sidebar-dropdown-menu-item">
                <a href="https://script.google.com/macros/s/AKfycbwMK_f0UTvBFciKnCaETEdGSGBRNqpSVX1IeHR_ELx4/dev?page=EditUser">จัดการผู้ใช้งาน</a>
              </li>
              <li class="sidebar-dropdown-menu-item">
                <a href="#" onclick="showSettingsModal(); return false;">ตั้งค่าระบบ</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>

      <div class="sidebar-overlay"></div>

      <!-- หน้าหลัก -->
      <main class="bg-light pb-5">
        <!-- Navbar -->
        <div class="px-3">
          <nav class="navbar rounded-bottom navbar-expand-lg navbar-light bg-primary shadow-sm">
            <div class="container-fluid">
              <button
                class="navbar-toggler border-0 d-lg-none"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#sidebar"
                aria-controls="sidebar"
                aria-expanded="false"
              >
                <i class="ri-menu-line sidebar-toggle me-3 d-block d-md-none text-white"></i>
              </button>

              <a id="page_title" class="navbar-brand mx-auto fs-3 fw-bold text-white" href="#"> DASHBOARD </a>

              <!-- เมนูโปรไฟล์ -->
              <div class="d-flex align-items-center">
                <div class="dropdown">
                  <a
                    class="nav-link dropdown-toggle d-flex align-items-center"
                    href="#"
                    id="userDropdown"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <img
                      class="profile-image rounded-circle me-2"
                      src="https://lh5.googleusercontent.com/d/1Gusc9uPNULQQxps9Uee8rZajweC7X8HN"
                      alt="รูปโปรไฟล์"
                      style="width: 50px; height: 50px; object-fit: cover"
                    />
                  </a>

                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                    <li>
                      <a class="dropdown-item nav-menu-page" data-main-page-id="edit_profile" href="#"
                        ><i class="ri-user-settings-line me-2"></i>จัดการโปรไฟล์</a
                      >
                    </li>
                    <li>
                      <a class="dropdown-item" href="#"><i class="ri-file-list-3-line me-2"></i>จัดการข้อมูล</a>
                    </li>
                    <li><hr class="dropdown-divider" /></li>
                    <li>
                      <a class="dropdown-item" href="#" onclick="handleLogout(); return false;"
                        ><i class="ri-logout-box-r-line me-2"></i>ออกจากระบบ</a
                      >
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </nav>
        </div>

        <!-- หน้าหลัก, หน้าย่อย -->
        <div class="container-xxl">
          <!-- หน้าแรก,ตาราง -->
          <div id="homepage" class="main-page mt-5" data-page-name="DASHBOARD">
            <!-- สรุปข้อมูล -->
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-xl-4 mb-4">
              <div class="col d-flex">
                <div class="card status-card bg-total text-white flex-fill">
                  <div class="card-body d-flex flex-column">
                    <div class="d-flex align-items-center">
                      <div class="status-icon">
                        <i class="bi bi-boxes fs-3"></i>
                      </div>
                      <div class="ms-3">
                        <div class="status-label">คนใข้ทั้งหมด</div>
                        <div class="status-value" id="totalRequests">0</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col d-flex">
                <div class="card status-card bg-approved text-white flex-fill">
                  <div class="card-body d-flex flex-column">
                    <div class="d-flex align-items-center">
                      <div class="status-icon">
                        <i class="bi bi-clock fs-3"></i>
                      </div>
                      <div class="ms-3">
                        <div class="status-label">รอดำเนินการ</div>
                        <div class="status-value" id="approvedRequests">0</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col d-flex">
                <div class="card status-card bg-pending text-white flex-fill">
                  <div class="card-body d-flex flex-column">
                    <div class="d-flex align-items-center">
                      <div class="status-icon">
                        <i class="bi bi-ban fs-3"></i>
                      </div>
                      <div class="ms-3">
                        <div class="status-label">ปฏิเสธ</div>
                        <div class="status-value" id="pendingRequests">0</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col d-flex">
                <div class="card status-card bg-completed text-white flex-fill">
                  <div class="card-body d-flex flex-column">
                    <div class="d-flex align-items-center">
                      <div class="status-icon">
                        <i class="bi bi-flag-fill fs-3"></i>
                      </div>
                      <div class="ms-3">
                        <div class="status-label">สำเร็จ</div>
                        <div class="status-value" id="completedRequests">0</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- กรองข้อมูล -->
            <div class="card shadow-sm mb-4">
              <div class="bg-header text-white rounded-sm col-sm-12 px-4 mb-2 py-3 d-flex justify-content-between align-items-center">
                <h5 class="card-title fw-bold mb-0">รายการข้อมูลทั้งหมด</h5>
                <div class="d-flex gap-3">
                  <button class="btn btn-cancel" id="reset_filter"><i class="bi bi-arrow-clockwise pe-1"></i>รีเซ็ต</button>
                  <button class="btn btn-add" id="add_patient_data" data-bs-toggle="modal" data-bs-target="#generalInformation_modal">
                    <i class="bi bi-plus-circle pe-1"></i>เพิ่มข้อมูล
                  </button>
                </div>
              </div>

              <div class="card-body">
                <div class="row g-3">
                  <!-- กรองข้อมูลทั้งตาราง -->
                  <div class="col-md-8">
                    <div class="input-group">
                      <span class="input-group-text bg-light border-end-0">
                        <i class="bi bi-search"></i>
                      </span>
                      <input type="search" class="table_filter form-control" id="searchDataTable" placeholder="ค้นหารายการ..." />
                    </div>
                  </div>
                  <!-- กรองข้อมูลคลอลั่ม สถานะ -->
                  <div class="col-md-4" id="filter_col3" data-column="3">
                    <select class="column_filter_same form-select" id="col3_filter">
                      <option value="">สถานะทั้งหมด</option>
                      <option value="รอดำเนินการ">รอดำเนินการ</option>
                      <option value="อนุมัติ">อนุมัติ</option>
                      <option value="ปฏิเสธ">ปฏิเสธ</option>
                      <option value="เสร็จสิ้น">เสร็จสิ้น</option>
                    </select>
                  </div>

                  <!-- กรองข้อมูลคลอลั่ม วันที่เข้ารับบริการ -->
                  <div class="col-sm-6">
                    <div class="input-group">
                      <span class="input-group-text bg-light border-end-0">
                        <i class="bi bi-calendar-range"></i>
                      </span>
                      <input type="text" class="form-control mc-date-picker" id="service_start_date" placeholder="วันที่เริ่มต้น..." readonly />
                      <input type="time" class="form-control" id="service_start_time" />
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="input-group">
                      <span class="input-group-text bg-light border-end-0">
                        <i class="bi bi-calendar-range"></i>
                      </span>
                      <input type="text" class="form-control mc-date-picker" id="until_the_date_of_service" placeholder="ถึงวันที่..." readonly />
                      <input type="time" class="form-control" id="until_the_time_of_service" />
                    </div>
                  </div>
                </div>
              </div>
              <hr />
              <!-- ตารางข้อมูล -->
              <div class="data-table px-3">
                <table id="main_user_data_table" class="table-responsive nowrap" style="width: 100%">
                  <thead>
                    <tr class="data-table-row">
                      <th></th>
                      <th>วันที่เข้ารับบริการ</th>
                      <th>การดำเนินการ</th>
                      <th>ชื่อ-สกุล</th>
                      <th>เลขบัตรประชาชน</th>
                      <th>เพศ</th>
                      <th>อายุ</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="data-table-row">
                      <td>
                        <img class="profile-table" src="https://lh5.googleusercontent.com/d/1wnYXEcQNqUTJ15WL9Hck79IIf48QNU5k" alt />
                      </td>
                      <td>20/02/2025, 20:16</td>
                      <td><span class="approve approve-approved">อนุมัติ</span></td>
                      <td>นาย ประยุทธ์ จันโทรลา</td>
                      <td>1450587369915</td>
                      <td>ชาย</td>
                      <td>64 ปี</td>
                    </tr>
                    <tr class="data-table-row">
                      <td>
                        <img class="profile-table" src="https://lh5.googleusercontent.com/d/14JrOi6I2qanUTFn4Q_ftHDDkrGGSw8iV" alt />
                      </td>
                      <td>21/02/2025, 17:10</td>
                      <td><span class="approve approve-pending">รอดำเนินการ</span></td>
                      <td>นาย ทักษิน อินนะวัตร</td>
                      <td>7369915145058</td>
                      <td>ชาย</td>
                      <td>83 ปี</td>
                    </tr>
                    <tr class="data-table-row">
                      <td>
                        <img class="profile-table" src="https://lh5.googleusercontent.com/d/16fpYWqjNrk2cg0EW3LlSO6HZh673-4ht" alt />
                      </td>
                      <td>22/02/2025, 21:16</td>
                      <td><span class="approve approve-refuse">ปฏิเสธ</span></td>
                      <td>นาย ประวิตร จันโทรลา</td>
                      <td>7369915145058</td>
                      <td>ชาย</td>
                      <td>71 ปี</td>
                    </tr>
                    <tr class="data-table-row">
                      <td>
                        <img class="profile-table" src="https://lh5.googleusercontent.com/d/16fpYWqjNrk2cg0EW3LlSO6HZh673-4ht" alt />
                      </td>
                      <td>22/02/2025, 21:16</td>
                      <td><span class="approve approve-cancel">ยกเลิก</span></td>
                      <td>นาย ประวิตร จันโทรลา</td>
                      <td>7369915145058</td>
                      <td>ชาย</td>
                      <td>71 ปี</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- ข้อมูลผู้ป่วย -->
          <section id="patient_history">
            <!-- ข้อมูลผู้ป่วย -->
            <div id="patientInformation" class="main-page mt-5" data-page-name="ข้อมูลผู้ป่วย">
              <!-- ปุ่มเมนูข้อมูลผู้ป่วย -->
              <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-xl-3">
                <div class="col d-flex">
                  <div class="card status-card bg-total text-white btn-menu-child-page flex-fill" data-child-page-id="patientInformation_1">
                    <div class="card-body d-flex flex-column">
                      <div class="d-flex align-items-center">
                        <div class="status-icon">
                          <img src="https://lh5.googleusercontent.com/d/1_4bqt5irDAlX6ZBK2lETH_JbqHfDvqvg" alt="consult" />
                        </div>
                        <div class="ms-3">
                          <div class="status-label">ข้อมูลทั่วไปของผู้ป่วย</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col d-flex">
                  <div class="card status-card bg-pending text-white btn-menu-child-page flex-fill" data-child-page-id="patientInformation_2">
                    <div class="card-body d-flex flex-column">
                      <div class="d-flex align-items-center">
                        <div class="status-icon">
                          <img src="https://lh5.googleusercontent.com/d/1bJahWI91zSmTwTc4M7NW6kQ71BM-HWMw" alt="consult" />
                        </div>
                        <div class="ms-3">
                          <div class="status-label">Consult for</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col d-flex">
                  <div class="card status-card bg-approved text-white btn-menu-child-page flex-fill" data-child-page-id="patientInformation_3">
                    <div class="card-body d-flex flex-column">
                      <div class="d-flex align-items-center">
                        <div class="status-icon">
                          <img src="https://lh5.googleusercontent.com/d/1B49xnjh4CsYad7rDuQiIGm9kcw_Ame3S" alt="health-report" />
                        </div>
                        <div class="ms-3">
                          <div class="status-label">ข้อมูลสภาวะสุขภาพ</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ข้อมูลทั่วไปของผู้ป่วย -->
              <div id="patientInformation_1" class="child-page active px-3 my-3">
                <button
                  id="edit_patientInformation1"
                  type="button"
                  class="btn-edit"
                  data-bs-toggle="modal"
                  data-bs-target="#generalInformation_modal"
                >
                  <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                </button>
                <div class="profile-main pt-5">
                  <img id="patientImages" src="https://lh5.googleusercontent.com/d/1VZQfP1X7rawlEsI5BdrC9uHekPhHAkvx" alt="profile" />
                </div>
                <div class="detail">
                  <div>
                    <h4 class="text-center mb-4">ข้อมูลทั่วไปของผู้ป่วย</h4>
                    <ul>
                      <li>
                        วันที่เข้ารับบริการ:
                        <span id="serviceDate">20/01/2024, 20:16:54</span>
                      </li>
                      <li>Hn: <span id="hn">BBB</span></li>
                      <li>ชื่อ-สกุล: <span id="fullName">ตูมตาม สุกฤษฎิ์</span></li>
                      <li>
                        เลขบัตรประชาชน:
                        <span id="nationalID">1544789635887</span>
                      </li>
                      <li>วันเกิด: <span id="birthday">18/06/1870</span></li>
                      <li>อายุ: <span id="age">75</span></li>
                      <li>ศาสนา: <span id="religion">พุทธ</span></li>
                      <li>เพศ: <span id="gender">ชาย</span></li>
                      <li>น้ำหนัก: <span id="weight">65</span></li>
                      <li>ส่วนสูง: <span id="height">168</span></li>
                      <li>
                        สิทธิ์การรักษา:
                        <span id="rightToTreatment">ประกันสังคม</span>
                      </li>
                      <li>เบอร์โทรติดต่อ: <span id="tel">0997548116</span></li>
                      <li>
                        ที่อยู่:
                        <span id="address">111/11 ตำบลบางพลีใหญ่ อำเภอบางพลี จังหวัดสมุทรปราการ 10540</span>
                      </li>
                      <li>
                        วันที่ admit:
                        <span id="startAdmitDate">15/06/2024</span> ถึง
                        <span id="finishAdmitDate">31/10/2024</span>
                      </li>
                      <li>
                        ความคิดเห็นของแพทย์:
                        <span id="doctorOpinion">XXXXX</span>
                      </li>
                    </ul>
                  </div>
                </div>

                <section class="photo-gallery mb-5 mx-3">
                  <div class="container">
                    <div class="row row-cols-1 row-cols-md-2 row-cols-xl-4 gx-5 gy-4">
                      <div class="col photo-history photo-preview">
                        <img
                          id="patientPicture1"
                          src="https://lh5.googleusercontent.com/d/16jxzdJ7eT0hbOZ2KG3s6-AgaFfpK0lFT"
                          alt="Lorem ipsum dolor sit amet"
                        />
                      </div>
                      <div class="col photo-history photo-preview">
                        <img
                          id="patientPicture2"
                          src="https://lh5.googleusercontent.com/d/1QeA1R8azZkNlCiHY1AHPXjUtI9rCXPG2"
                          alt="Ipsum lorem dolor sit amet"
                        />
                      </div>
                      <div class="col photo-history photo-preview">
                        <img
                          id="patientPicture3"
                          src="https://lh5.googleusercontent.com/d/1Gi9HPonxFh-6n782ngJ4A4o-0bhLO7hJ"
                          alt="Dolor lorem ipsum sit amet"
                        />
                      </div>
                      <div class="col photo-history photo-preview">
                        <img
                          id="patientPicture4"
                          src="https://lh5.googleusercontent.com/d/1Gi9HPonxFh-6n782ngJ4A4o-0bhLO7hJ"
                          alt="Sit amet lorem ipsum dolor"
                        />
                      </div>
                    </div>
                  </div>
                </section>
              </div>

              <!-- Consult for -->
              <div id="patientInformation_2" class="child-page px-3 my-3">
                <button id="edit_patientInformation2" type="button" class="btn-edit" data-bs-toggle="modal" data-bs-target="#consultFor_modal">
                  <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                </button>
                <div class="child-page-icon pt-5">
                  <img src="https://lh5.googleusercontent.com/d/1bJahWI91zSmTwTc4M7NW6kQ71BM-HWMw" alt="consult" />
                </div>
                <div class="detail">
                  <div>
                    <h4 class="text-center mb-4">Consult for</h4>
                    <ul>
                      <li>
                        Advance care plant:
                        <span id="advanceCarePlant">A</span>
                      </li>
                      <li>
                        Best suportive care:
                        <span id="bestSuportiveCare">B</span>
                      </li>
                      <li>
                        End of life care:
                        <span id="endOfLifeCareIPD_EOL">EOL care at home(home visit)</span>
                      </li>
                      <li>
                        Skill training for home care at EOL:
                        <span id="skillTrainingForHomeCareAtEOL">D</span>
                      </li>
                      <li>
                        Socioeconomic &amp; spiritual problem:
                        <span id="socioeconomicAndSpiritualProblem"></span>
                      </li>
                      <li>
                        Medical equipment lending:
                        <span id="medicalEquipmentLending"></span>
                      </li>
                      <li>
                        หน่วยที่ส่งปรึกษา (หอผู้ป่วย, OPD):
                        <span id="consultationUnit"></span>
                      </li>
                      <li>
                        แพทย์ที่ส่งปรึกษา:
                        <span id="referringPhysician"></span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

              <!-- ข้อมูลสภาวะสุขภาพ -->
              <div id="patientInformation_3" class="child-page px-3 my-3">
                <button id="edit_patientInformation3" type="button" class="btn-edit" data-bs-toggle="modal" data-bs-target="#healthInformation_modal">
                  <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                </button>
                <div class="child-page-icon pt-5">
                  <img src="https://lh5.googleusercontent.com/d/1B49xnjh4CsYad7rDuQiIGm9kcw_Ame3S" alt="health-report" />
                </div>
                <div class="detail">
                  <div>
                    <h4 class="text-center mb-4">ข้อมูลสภาวะสุขภาพ</h4>
                    <ul>
                      <li>Diagnosis: <span id="diagnosis"></span></li>
                      <li>
                        ผู้ป่วย Palliative care แยกตามโรค:
                        <span id="patientsByDisease"></span>
                      </li>
                      <li>
                        Chief compaint:
                        <span id="chiefCompaint"></span>
                      </li>
                      <li>
                        Status/Underlying disease:
                        <span id="statusUnderlyingDisease"></span>
                      </li>
                      <li>PPS: <span id="pps"></span></li>
                      <li>
                        Biological problem:
                        <span id="biologicalProblem"></span>
                      </li>
                      <li>
                        Psychosocial:
                        <span id="psychosocial"></span>
                      </li>
                      <li>Spiritual: <span id="spiritual"></span></li>
                      <li>
                        แบบประเมิน PPS:
                        <span id="ppsAssessment"></span>
                      </li>
                      <li>
                        แบบประเมินอาการรบกวน ESAS:
                        <span id="esasAssessment"></span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <!-- การดูแลรักษา -->
            <div id="treatment" class="main-page mt-5" data-page-name="การดูแลรักษา">
              <!-- ปุ่มเมนูการดูแลรักษา -->
              <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-xl-3">
                <div class="col d-flex">
                  <div class="card status-card bg-total text-white btn-menu-child-page flex-fill" data-child-page-id="treatment_1">
                    <div class="card-body d-flex flex-column">
                      <div class="d-flex align-items-center">
                        <div class="status-icon">
                          <img src="https://lh5.googleusercontent.com/d/1R-_lfnIviohWmYXWK9l3i8K0I-S0oLol" alt="consult" />
                        </div>
                        <div class="ms-3">
                          <div class="status-label">Family meeting, Advance care plan</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col d-flex">
                  <div class="card status-card bg-pending text-white btn-menu-child-page flex-fill" data-child-page-id="treatment_2">
                    <div class="card-body d-flex flex-column">
                      <div class="d-flex align-items-center">
                        <div class="status-icon">
                          <img src="https://lh5.googleusercontent.com/d/17d-ZvzrG2wzbriB2e7yx7TKt3NXzEw4n" alt="consult" />
                        </div>
                        <div class="ms-3">
                          <div class="status-label">Treatment</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col d-flex">
                  <div class="card status-card bg-approved text-white btn-menu-child-page flex-fill" data-child-page-id="treatment_3">
                    <div class="card-body d-flex flex-column">
                      <div class="d-flex align-items-center">
                        <div class="status-icon">
                          <img src="https://lh5.googleusercontent.com/d/1JL0sk1J0s5sUpp3VYDfYNAMrTT9yCtq5" alt="health-report" />
                        </div>
                        <div class="ms-3">
                          <div class="status-label">Education&training programs</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Family meeting, Advance care plan -->
              <div id="treatment_1" class="child-page px-3 my-3">
                <button id="treatment_edit1" type="button" class="btn-edit" data-bs-toggle="modal" data-bs-target="#familyMeeting_modal">
                  <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                </button>
                <div class="child-page-icon pt-5">
                  <img src="https://lh5.googleusercontent.com/d/1R-_lfnIviohWmYXWK9l3i8K0I-S0oLol" alt="family-meeting" />
                </div>
                <div class="detail">
                  <div>
                    <h4 class="text-center mb-4">Family meeting, Advance care plan</h4>
                    <ul>
                      <li>
                        วันที่ Family meeting:
                        <span id="meetingDate"></span>
                      </li>
                      <li>
                        การรับรู้การดำเนินการของโรค:
                        <span id="recognitionDisease"></span>
                      </li>
                      <li>
                        Living will documentation:
                        <span id="livingWillDocumentation"></span>
                      </li>
                      <li>
                        Resuscitaion plan: noETT:
                        <span id="resuscitaionPlanNoETT"></span>
                      </li>
                      <li>
                        Place of death:
                        <span id="placeOfDeath"></span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

              <!-- Treatment -->
              <div id="treatment_2" class="child-page px-3 my-3">
                <button id="treatment_edit2" type="button" class="btn-edit" data-bs-toggle="modal" data-bs-target="#treatment_modal">
                  <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                </button>
                <div class="child-page-icon pt-5">
                  <img src="https://lh5.googleusercontent.com/d/17d-ZvzrG2wzbriB2e7yx7TKt3NXzEw4n" alt="treatment" />
                </div>
                <div class="detail">
                  <div>
                    <h4 class="text-center mb-4">Treatment</h4>
                    <ul>
                      <li>PC note: <span id="pcNote"></span></li>
                      <li>
                        ยาที่ใช้:
                        <span id="medicationsUsed"></span>
                      </li>
                      <li>
                        ปัญหาที่ต้องการแก้ไขเร่งด่วน:
                        <span id="issuesSolvedUrgently"></span>
                      </li>
                      <li>
                        แผนการดูแล/กิจกรรการดูแล:
                        <span id="carePlanCareRoutine"></span>
                      </li>
                      <li>
                        ผลลัพธ์/ข้อเสนอแนะ:
                        <span id="resultsSuggestions"></span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>

              <!-- Education&training programs -->
              <div id="treatment_3" class="child-page px-3 my-3">
                <button id="treatment_edit3" type="button" class="btn-edit" data-bs-toggle="modal" data-bs-target="#educationTraining_modal">
                  <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                </button>
                <div class="child-page-icon pt-5">
                  <img src="https://lh5.googleusercontent.com/d/1JL0sk1J0s5sUpp3VYDfYNAMrTT9yCtq5" alt="Education-training" />
                </div>
                <div class="detail">
                  <div>
                    <h4 class="text-center mb-4">Education&amp;training programs</h4>
                    <ul>
                      <li>Training: <span id="trainning">ญาติ</span></li>
                      <li>
                        End of life care:
                        <span id="endOfLifeCare"></span>
                      </li>
                      <li>
                        อาการที่พบได้เมื่อใกล้เสียชีวิต:
                        <span id="symptomsNearDeath"></span>
                      </li>
                      <li>
                        การผ่อนคลายร่างกายและจิตใจ:
                        <span id="relaxation"></span>
                      </li>
                      <li>
                        การพลิกตะแคงตัวจัดท่า:
                        <span id="sideFlip"></span>
                      </li>
                      <li>
                        การดูแลทางเดินหายใจ:
                        <span id="respiratoryCare"></span>
                      </li>
                      <li>
                        การดูแลผู้ป่วย On NG-tube:
                        <span id="onNgTube"></span>
                      </li>
                      <li>
                        การดูแลผู้ป่วย Retrained foley's cath:
                        <span id="retrainedFoleyCath"></span>
                      </li>
                      <li>Wond care: <span id="wondCare"></span></li>
                      <li>
                        Colostomy care:
                        <span id="colostomyCare"></span>
                      </li>
                      <li>อื่นๆ: <span id="other"></span></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <!-- วางแผนจำหน่าย  -->
            <div id="planning" class="main-page mt-5" data-page-name="วางแผนจำหน่าย">
              <!-- ปุ่มเมนูวางแผนจำหน่าย -->
              <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-xl-3">
                <div class="col d-flex">
                  <div class="card status-card bg-total text-white btn-menu-child-page flex-fill" data-child-page-id="planning_1">
                    <div class="card-body d-flex flex-column">
                      <div class="d-flex align-items-center">
                        <div class="status-icon">
                          <img src="https://lh5.googleusercontent.com/d/1WG05teMtGeslui4cdnhuBFHdy5FchTVH" alt="consult" />
                        </div>
                        <div class="ms-3">
                          <div class="status-label">ติดตามประเมินอาการ, ให้คำปรึกษาตลอด 24 ชม.</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col d-flex">
                  <div class="card status-card bg-pending text-white btn-menu-child-page flex-fill" data-child-page-id="planning_2">
                    <div class="card-body d-flex flex-column">
                      <div class="d-flex align-items-center">
                        <div class="status-icon">
                          <img src="https://lh5.googleusercontent.com/d/1-PI4l76uMEAGuRWjMnISGT2K37FI8IBT" alt="consult" />
                        </div>
                        <div class="ms-3">
                          <div class="status-label">เยี่ยมบ้าน,ส่งต่อเครือข่าย</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ติดตามประเมินอาการ, ให้คำปรึกษาตลอด 24 ชม. -->
              <div id="planning_1" class="child-page px-3 my-3">
                <button id="planning_edit1" type="button" class="btn-edit" data-bs-toggle="modal" data-bs-target="#followUp_modal">
                  <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                </button>
                <div class="child-page-icon pt-5">
                  <img src="https://lh5.googleusercontent.com/d/1WG05teMtGeslui4cdnhuBFHdy5FchTVH" alt="consultation" />
                </div>
                <div class="detail">
                  <div>
                    <h4 class="text-center mb-4">ติดตามประเมินอาการ, ให้คำปรึกษาตลอด 24 ชม.</h4>
                    <ul>
                      <li>
                        วันที่ติดตาม ให้คำปรึกษา/เวลา:
                        <span id="followUp_followUpDate">17/07/2024, 14:49</span>
                      </li>
                      <li>
                        PPS 50-100%:
                        <span id="followUp_pps50_100">5</span>
                      </li>
                      <li>PPS 30-40%: <span id="followUp_pps30_40">6</span></li>
                      <li>PPS 10-20%: <span id="followUp_pps10_20">7</span></li>
                      <li>PPS %: <span id="followUp_ppsPercent">8</span></li>
                      <li>ปัญหา: <span id="followUp_issue">G</span></li>
                      <li>การแก้ไข: <span id="followUp_resolve">I</span></li>
                      <li>กิจกรรการดูแล: <span id="followUp_caring">no Central line</span></li>
                    </ul>
                  </div>
                </div>
              </div>

              <!-- เยี่ยมบ้าน,ส่งต่อเครือข่าย -->
              <div id="planning_2" class="child-page px-3 my-3">
                <button id="planning_edit2" type="button" class="btn-edit" data-bs-toggle="modal" data-bs-target="#homeVisit_modal">
                  <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                </button>
                <div class="child-page-icon pt-5">
                  <img src="https://lh5.googleusercontent.com/d/1-PI4l76uMEAGuRWjMnISGT2K37FI8IBT" alt="home-visits" />
                </div>
                <div class="detail">
                  <div>
                    <h4 class="text-center mb-4">เยี่ยมบ้าน,ส่งต่อเครือข่าย</h4>
                    <ul>
                      <li>วันที่เยี่ยมบ้าน/เวลา:<span id="homeVisit_homeVisitDate">10/02/2025, 12:26</span></li>
                      <li>
                        เยี่ยมบ้านครั้งที่:
                        <span id="homeVisit_homeVisitNo">1</span>
                      </li>
                      <li>PPS %: <span id="homeVisit_ppsPercent">30</span></li>
                      <li>ปัญหา: <span id="homeVisit_issue">หอยเหนื่ิอย</span></li>
                      <li>การแก้ไข: <span id="homeVisit_resolve"></span></li>
                      <li>กิจกรรการดูแล: <span id="homeVisit_caring">no Central line</span></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <!-- การดูแลหลังเสียชีวิต  -->
            <div id="bereavementCare" class="main-page mt-5" data-page-name="การดูแลหลังเสียชีวิต">
              <!-- ปุ่มเมนูวางแผนจำหน่าย -->
              <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-xl-3">
                <div class="col d-flex">
                  <div class="card status-card bg-total text-white btn-menu-child-page flex-fill" data-child-page-id="bereavementCare_1">
                    <div class="card-body d-flex flex-column">
                      <div class="d-flex align-items-center">
                        <div class="status-icon">
                          <img src="https://lh5.googleusercontent.com/d/1jqnqB7oj9Lks6MtytU9SfMhAGV8yCZtD" alt="consult" />
                        </div>
                        <div class="ms-3">
                          <div class="status-label">ประเมิน 2Q,9Q,8Q,BGQ good death,ความพึงพอใจ</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- ประเมิน 2Q,9Q,8Q,BGQ good death,ความพึงพอใจ -->
              <div id="bereavementCare_1" class="child-page px-3 my-3">
                <button id="BereavementCare_edit1" type="button" class="btn-edit" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                  <i class="fa-regular fa-pen-to-square" aria-hidden="true"></i>
                </button>
                <div class="child-page-icon pt-5">
                  <img src="https://lh5.googleusercontent.com/d/1jqnqB7oj9Lks6MtytU9SfMhAGV8yCZtD" alt="assessment" />
                </div>
                <div class="detail">
                  <div>
                    <h4 class="text-center mb-4">ประเมิน 2Q,9Q,8Q,BGQ good death,ความพึงพอใจ</h4>
                    <ul>
                      <li>Advance care plant: 20/01/2024, 20:16:54</li>
                      <li>Best suportive care:</li>
                      <li>
                        End of life care
                        <ol type="1">
                          <li>IPD EOL care at primary</li>
                          <li>EOL care at home (home visit)</li>
                        </ol>
                      </li>
                      <li>Skill training for home care at EOL</li>
                      <li>Socioeconomic &amp; spiritual problem</li>
                      <li>Medical equipment lending</li>
                      <li>หน่วยที่ส่งปรึกษา (หอผู้ป่วย, OPD)</li>
                      <li>แพทย์ที่ส่งปรึกษา</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- แก้ไขโปรไฟล์ -->
          <div id="edit_profile" class="main-page container mt-5" data-page-name="แก้ไขโปรไฟล์">
            <div class="row">
              <div class="col-lg-4 mb-4">
                <div class="card profile-card">
                  <div class="card-body text-center">
                    <div class="profile-image-container mb-4">
                      <img
                        class="profile-image rounded-circle img-thumbnail"
                        src="https://lh5.googleusercontent.com/d/1uW-UA9ifCwi72w8K6sNFpkrONQUg8uqv"
                        alt="Profile Image"
                        style="width: 150px; height: 150px; object-fit: cover"
                      />
                      <label for="profileImageUpload" class="btn-upload">
                        <i class="bi bi-camera-fill"></i>
                      </label>
                      <input type="file" id="profileImageUpload" accept="image/*" style="display: none" onchange="handleProfileImageUpload(event)" />
                    </div>
                    <h4 id="profileName" class="card-title mb-2">admin1234</h4>
                    <p id="profileEmail" class="text-muted mb-2">admin@gmail.com</p>
                    <p id="profileRole" class="badge bg-danger">Admin</p>
                  </div>
                </div>
              </div>

              <div class="col-lg-8">
                <!-- อีเมล์ -->
                <div class="card profile-card mb-4">
                  <div class="card-body">
                    <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-4">
                      <h5 class="card-title d-flex align-items-center mb-3 mb-sm-0">
                        <i class="bi bi-envelope-fill me-2"></i>
                        <span>ข้อมูลอีเมล</span>
                      </h5>
                    </div>

                    <div class="email-info-container">
                      <div class="p-3 bg-light rounded-3 mb-3">
                        <div class="d-flex flex-column flex-sm-row align-items-start align-items-sm-center gap-2">
                          <div class="email-label text-muted">
                            <i class="bi bi-at me-2"></i>
                            <span>อีเมลปัจจุบัน:</span>
                          </div>
                          <div class="email-value flex-grow-1">
                            <span id="currentEmail" class="text-primary fw-bold word-break-all">admin@gmail.com</span>
                          </div>
                        </div>
                      </div>
                      <form id="emailForm">
                        <div class="form-input mb-4">
                          <div class="input-group input-group-lg">
                            <span class="input-group-text bg-light text-primary border-0"><i class="fa-regular fa-envelope fs-4"></i></span>
                            <input
                              type="email"
                              class="form-control bg-light border-0"
                              id="newEmail"
                              placeholder="email@example.com"
                              autocomplete="off"
                              required
                            />
                          </div>
                        </div>
                        <button type="submit" class="button-36">บันทึกข้อมูล</button>
                      </form>
                    </div>
                  </div>
                </div>

                <!-- ชื่อ-สกุล -->
                <div class="card profile-card mb-4">
                  <div class="card-body">
                    <h5 class="card-title d-flex align-items-center mb-4"><i class="bi bi-person-fill me-2 fs-4"></i>ข้อมูลส่วนตัว</h5>
                    <form id="profileForm">
                      <div class="form-input mb-4">
                        <label for="fullName" class="form-label">
                          ชื่อ-นามสกุล
                          <span class="text-danger ps-2"></span>
                        </label>
                        <div class="input-group input-group-lg">
                          <span class="input-group-text bg-light text-primary border-0"><i class="bi bi-person-badge fs-4"></i></span>
                          <input type="text" class="form-control bg-light border-0" id="fullName" placeholder="" autocomplete="off" required />
                        </div>
                      </div>
                      <button type="submit" class="button-36">บันทึกข้อมูล</button>
                    </form>
                  </div>
                </div>

                <!-- รหัสผ่าน -->
                <div class="card profile-card">
                  <div class="card-body">
                    <h5 class="card-title d-flex align-items-center mb-4"><i class="bi bi-shield-lock-fill me-2"></i>เปลี่ยนรหัสผ่าน</h5>
                    <form id="changePasswordForm">
                      <div class="mb-3">
                        <label for="oldPassword" class="form-label">
                          รหัสผ่าน
                          <span class="text-danger ps-2">*</span>
                        </label>
                        <div class="input-group input-group-lg">
                          <span class="input-group-text bg-light text-primary border-0"><i class="ri-lock-line fs-4"></i></span>
                          <input
                            type="password"
                            class="form-control bg-light border-0"
                            id="oldPassword"
                            placeholder="••••••••"
                            autocomplete="off"
                            required
                          />
                          <span class="input-group-text bg-light text-secondary border-0 toggle-password"><i class="fa fa-eye fs-5"></i></span>
                        </div>
                      </div>

                      <div class="mb-3">
                        <label for="newPassword" class="form-label">
                          รหัสผ่านไหม่
                          <span class="text-danger ps-2">*</span>
                        </label>
                        <div class="input-group input-group-lg">
                          <span class="input-group-text bg-light text-primary border-0"><i class="ri-lock-line fs-4"></i></span>
                          <input
                            type="password"
                            class="form-control bg-light border-0"
                            id="newPassword"
                            placeholder="••••••••"
                            autocomplete="off"
                            required
                          />
                          <span class="input-group-text bg-light text-secondary border-0 toggle-password"><i class="fa fa-eye fs-5"></i></span>
                        </div>
                        <div class="password-requirements text-muted small mt-1">
                          <i class="ri-information-line"></i>
                          รหัสผ่านต้องมีความยาวอย่างน้อย 8 ตัวอักษร ประกอบด้วยตัวอักษรตัวเล็ก ตัวใหญ่ ตัวเลขและอักขระพิเศษ
                        </div>
                      </div>

                      <div class="mb-3">
                        <label for="confirmPassword" class="form-label">
                          ยืนยันรหัสผ่าน
                          <span class="text-danger ps-2">*</span>
                        </label>
                        <div class="input-group input-group-lg">
                          <span class="input-group-text bg-light text-primary border-0"><i class="ri-lock-line fs-4"></i></span>
                          <input
                            type="password"
                            class="form-control bg-light border-0"
                            id="confirmPassword"
                            placeholder="••••••••"
                            autocomplete="off"
                            required
                          />
                          <span class="input-group-text bg-light text-secondary border-0 toggle-password"><i class="fa fa-eye fs-5"></i></span>
                        </div>
                      </div>

                      <button type="submit" class="button-36">เปลี่ยนรหัสผ่าน</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Modal -->
    <!-- ฟอร์มข้อมูลผู้ป่วย id: f100 -->
    <div>
      <!-- Modal Form ข้อมูลทั่วไป id: f100 -->
      <div
        class="modal modal-lg fade"
        id="generalInformation_modal"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="m100_GeneralInformationLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header py-3 py-3">
              <h5 class="modal-title" id="m100_GeneralInformationLabel"><i class="fa-regular fa-pen-to-square"></i> แก้ไขข้อมูล</h5>
              <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body pb-0">
              <form id="f100_GeneralInformation" onsubmit="">
                <div class="patientImages-upload">
                  <input type="hidden" name="mode" />
                  <input type="hidden" name="id" />
                  <div class="patientImages-edit">
                    <input type="file" id="f100_patientImagesUpload" name="patientImages" class="photo-upload" accept=".png, .jpg, .jpeg" />
                    <label for="f100_patientImagesUpload"></label>
                  </div>
                  <div class="patientImages-preview">
                    <div
                      id="f100_patientImagesPreview"
                      style="background-image: url(https://lh5.googleusercontent.com/d/1uW-UA9ifCwi72w8K6sNFpkrONQUg8uqv)"
                    ></div>
                  </div>
                </div>
                <div class="container">
                  <div class="row row-cols-1 row-cols-lg-2 gx-5 gy-3 mb-5 mx-lg-2">
                    <div class="col">
                      <label for="f100_serviceDate" class="form-label">วันที่เข้ารับบริการ</label>
                      <div class="input-group">
                        <input
                          type="text"
                          class="date-picker form-control"
                          id="f100_serviceDate"
                          name="serviceDate"
                          placeholder="วันที่, เวลา"
                          readonly
                        />
                      </div>
                    </div>
                    <div class="col">
                      <label for="f100_hn" class="form-label">Hn</label>
                      <input type="text" class="form-control" id="f100_hn" name="hn" placeholder="........................" required />
                    </div>
                    <div class="col">
                      <label for="f100_fullname" class="form-label">ชื่อ-สกุล</label>
                      <input type="text" class="form-control" id="f100_fullname" name="fullName" placeholder="ชื่อ.... นามสกุล...." required />
                    </div>
                    <div class="col">
                      <label for="f100_nationalID" class="form-label">เลขบัตรประชาชน</label>
                      <input
                        type="tel"
                        class="form-control"
                        id="f100_nationalID"
                        name="nationalID"
                        pattern="[0-9]{13}"
                        placeholder="เลขบัตรประชาชน 13 หลัก"
                        required
                      />
                    </div>
                    <div class="col">
                      <label for="f100_birthday" class="form-label">วันเกิด</label>
                      <div class="input-group">
                        <input type="text" class="date-picker form-control" id="f100_birthday" name="birthday" placeholder="วว/ดด/ปปปป" readonly />
                      </div>
                    </div>
                    <div class="col">
                      <label for="f100_age" class="form-label">อายุ</label>
                      <input type="tel" class="form-control" id="f100_age" name="age" placeholder="XXX ปี" required />
                    </div>
                    <div class="col">
                      <label for="f100_religion" class="form-label">ศาสนา</label>
                      <input type="text" class="form-control" id="f100_religion" name="religion" placeholder="........................" />
                    </div>
                    <div class="col">
                      <label for="f100_gender" class="form-label">เพศ</label>
                      <input type="text" class="form-control" id="f100_gender" name="gender" placeholder="........................" />
                    </div>
                    <div class="col">
                      <label for="f100_weight" class="form-label">น้ำหนัก</label>
                      <input type="tel" class="form-control" id="f100_weight" name="weight" placeholder="XXX กิโลกรัม" />
                    </div>
                    <div class="col">
                      <label for="f100_height" class="form-label">ส่วนสูง</label>
                      <input type="tel" class="form-control" id="f100_height" name="height" placeholder="XXX เซ็นติเมตร" />
                    </div>
                    <div class="col">
                      <label for="f100_rightToTreatment" class="form-label">สิทธิ์การรักษา</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f100_rightToTreatment"
                        name="rightToTreatment"
                        placeholder="........................"
                      />
                    </div>
                    <div class="col">
                      <label for="f100_tel" class="form-label">เบอร์โทรติดต่อ</label>
                      <input type="tel" class="form-control" id="f100_tel" name="tel" pattern="[0-9]{10}" placeholder="099XXXXXXX" />
                    </div>
                    <div class="col-lg-12">
                      <label for="f100_address" class="form-label">ที่อยู่</label>
                      <textarea
                        type="text"
                        class="form-control"
                        id="f100_address"
                        name="address"
                        rows="4"
                        placeholder="บ้านเลขที่, ซอย, ถนน, ตำบล, อำเภอ, จังหวัด"
                      ></textarea>
                    </div>
                    <div class="col">
                      <label for="f100_startAdmitDate" class="form-label">วันที่ admit</label>
                      <div class="input-group">
                        <input
                          type="text"
                          class="date-picker form-control"
                          id="f100_startAdmitDate"
                          name="startAdmitDate"
                          placeholder="วว/ดด/ปปปป"
                          readonly
                        />
                      </div>
                    </div>
                    <div class="col">
                      <label for="f100_finishAdmitDate" class="form-label">ถึงวันที่</label>
                      <div class="input-group">
                        <input
                          type="text"
                          class="date-picker form-control"
                          id="f100_finishAdmitDate"
                          name="finishAdmitDate"
                          placeholder="วว/ดด/ปปปป"
                          readonly
                        />
                      </div>
                    </div>
                    <div class="col-lg-12">
                      <label for="f100_doctorOpinion" class="form-label">ความคิดเห็นของแพทย์</label>
                      <textarea
                        type="text"
                        class="form-control"
                        id="f100_doctorOpinion"
                        name="doctorOpinion"
                        rows="4"
                        placeholder="........................"
                      ></textarea>
                    </div>
                  </div>

                  <!-- ภาพผู้ป่วย -->
                  <section class="photo-gallery mb-5 mx-3">
                    <div class="container">
                      <div class="row row-cols-1 row-cols-lg-2 g-5">
                        <div class="col photo-history">
                          <img id="f100_patientPicPreview1" src="https://picsum.photos/id/251/480/320.webp" alt="patientPicture1" />
                          <div class="photo-edit">
                            <input type="file" id="f100_patientPicUpload1" name="patientPicture1" class="photo-upload" accept=".png, .jpg, .jpeg" />
                            <label for="f100_patientPicUpload1"></label>
                            <input type="button" id="f100_patientPicDelete1" class="photo-delete" />
                            <label for="f100_patientPicDelete1"></label>
                          </div>
                        </div>
                        <div class="col photo-history">
                          <img id="f100_patientPicPreview2" src="https://picsum.photos/id/251/480/320.webp" alt="patientPicture2" />
                          <div class="photo-edit">
                            <input type="file" id="f100_patientPicUpload2" name="patientPicture2" class="photo-upload" accept=".png, .jpg, .jpeg" />
                            <label for="f100_patientPicUpload2"></label>
                            <input type="button" id="f100_patientPicDelete2" class="photo-delete" />
                            <label for="f100_patientPicDelete2"></label>
                          </div>
                        </div>
                        <div class="col photo-history">
                          <img id="f100_patientPicPreview3" src="https://picsum.photos/id/251/480/320.webp" alt="patientPicture3" />
                          <div class="photo-edit">
                            <input type="file" id="f100_patientPicUpload3" name="patientPicture3" class="photo-upload" accept=".png, .jpg, .jpeg" />
                            <label for="f100_patientPicUpload3"></label>
                            <input type="button" id="f100_patientPicDelete3" class="photo-delete" />
                            <label for="f100_patientPicDelete3"></label>
                          </div>
                        </div>
                        <div class="col photo-history">
                          <img id="f100_patientPicPreview4" src="https://picsum.photos/id/251/480/320.webp" alt="patientPicture4" />
                          <div class="photo-edit">
                            <input type="file" id="f100_patientPicUpload4" name="patientPicture4" class="photo-upload" accept=".png, .jpg, .jpeg" />
                            <label for="f100_patientPicUpload4"></label>
                            <input type="button" id="f100_patientPicDelete4" class="photo-delete" />
                            <label for="f100_patientPicDelete4"></label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </section>

                  <div class="modal-footer py-3 gap-2">
                    <button type="submit" class="btn-form btn-form-submit">บันทึก</button>
                    <button type="reset" class="btn-form btn-form-cancel" data-bs-dismiss="modal">ยกเลิก</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Form Consult for id: f101 -->
      <div
        class="modal modal-lg fade"
        id="consultFor_modal"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="m101_consultForLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header py-3 py-3">
              <h5 class="modal-title" id="m101_consultForLabel"><i class="fa-regular fa-pen-to-square"></i> แก้ไขข้อมูล</h5>
              <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body pb-0">
              <form id="f101_ConsultFor" onsubmit="">
                <div class="d-flex justify-content-center page-child-icon p-5">
                  <img src="https://lh5.googleusercontent.com/d/1bJahWI91zSmTwTc4M7NW6kQ71BM-HWMw" alt="ConsultFor" />
                </div>
                <div class="container">
                  <div class="row row-cols-1 row-cols-lg-2 gx-5 gy-3 mb-5 mx-lg-2">
                    <div class="col">
                      <label for="f101_advanceCarePlant" class="form-label">Advance care plant</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f101_advanceCarePlant"
                        name="advanceCarePlant"
                        placeholder="Advance care plant..."
                        required
                      />
                    </div>
                    <div class="col">
                      <label for="f101_bestSuportiveCare" class="form-label">Best suportive care</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f101_bestSuportiveCare"
                        name="bestSuportiveCare"
                        placeholder="Best suportive care......"
                        required
                      />
                    </div>
                    <div class="col">
                      <label for="f101_endOfLifeCareIPD_EOL" class="form-label">End of life care</label>
                      <select class="form-select" id="f101_endOfLifeCareIPD_EOL" name="endOfLifeCareIPD_EOL">
                        <option value="" selected>เลือกจากรายการ</option>
                        <option value="IPD EOL care at primary">1.IPD EOL care at primary</option>
                        <option value="EOL care at home(home visit)">2.EOL care at home(home visit)</option>
                      </select>
                    </div>
                    <div class="col">
                      <label for="f101_skillTrainingForHomeCareAtEOL" class="form-label">Skill training for home care at EOL</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f101_skillTrainingForHomeCareAtEOL"
                        name="skillTrainingForHomeCareAtEOL"
                        placeholder=""
                      />
                    </div>
                    <div class="col">
                      <label for="f101_socioeconomicAndSpiritualProblem" class="form-label">Socioeconomic & spiritual problem</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f101_socioeconomicAndSpiritualProblem"
                        name="socioeconomicAndSpiritualProblem"
                        placeholder="Socioeconomic & spiritual problem..."
                      />
                    </div>
                    <div class="col">
                      <label for="f101_medicalEquipmentLending" class="form-label">Medical equipment lending</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f101_medicalEquipmentLending"
                        name="medicalEquipmentLending"
                        placeholder="Medical equipment lending..."
                      />
                    </div>
                    <div class="col">
                      <label for="f101_consultationUnit" class="form-label">หน่วยที่ส่งปรึกษา (หอผู้ป่วย, OPD)</label>
                      <select id="f101_consultationUnit" name="consultationUnit" class="form-select" aria-label="Default select example">
                        <option value="" selected>เลือก หอผู้ป่วย...</option>
                        <option value="อายุรกรรมชาย">อายุรกรรมชาย</option>
                        <option value="อายุรกรรมหญิง">อายุรกรรมหญิง</option>
                        <option value="ศัลยกรรมชาย">ศัลยกรรมชาย</option>
                        <option value="ศัลยกรรมหญิง">ศัลยกรรมหญิง</option>
                        <option value="อุบัติเหตุชาย">อุบัติเหตุชาย</option>
                        <option value="สูตินรีเวชกรรมฯ">สูตินรีเวชกรรมฯ</option>
                        <option value="อาคาร 1 ชั้น 4">อาคาร 1 ชั้น 4</option>
                        <option value="อาคาร 2 ชั้น 6">อาคาร 2 ชั้น 6</option>
                        <option value="ICU ศัลฯ">ICU ศัลฯ</option>
                        <option value="OPD">OPD</option>
                        <option value="อื่นๆ">อื่นๆ</option>
                      </select>
                    </div>
                    <div class="col">
                      <label for="f101_referringPhysician" class="form-label">แพทย์ที่ส่งปรึกษา</label>
                      <input type="text" class="form-control" id="f101_referringPhysician" name="referringPhysician" placeholder="" />
                    </div>
                  </div>

                  <div class="modal-footer py-3 gap-2">
                    <button type="submit" class="btn-form btn-form-submit">บันทึก</button>
                    <button type="reset" class="btn-form btn-form-cancel" data-bs-dismiss="modal">ยกเลิก</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Form ข้อมูลสภาวะสุขภาพ id: f103 -->
      <div
        class="modal modal-lg fade"
        id="healthInformation_modal"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="m103_healthInformation"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header py-3">
              <h5 class="modal-title" id="m103_healthInformation"><i class="fa-regular fa-pen-to-square"></i> แก้ไขข้อมูล</h5>
              <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body pb-0">
              <form id="f103_HealthInformation" onsubmit="">
                <div class="d-flex justify-content-center page-child-icon p-5">
                  <img src="https://lh5.googleusercontent.com/d/1B49xnjh4CsYad7rDuQiIGm9kcw_Ame3S" alt="HealthInformation" />
                </div>
                <div class="container">
                  <div class="row row-cols-1 row-cols-lg-2 gx-5 gy-3 mb-5 mx-lg-2">
                    <div class="col">
                      <label for="f102_diagnosis" class="form-label">Diagnosis</label>
                      <input type="text" class="form-control" id="f102_diagnosis" name="diagnosis" placeholder="Diagnosis....." required />
                    </div>
                    <div class="col">
                      <label for="f102_patientsByDisease " class="form-label">ผู้ป่วย Palliative care แยกตามโรค</label>
                      <select id="f102_patientsByDisease" name="patientsByDisease" class="form-select" aria-label="Default select example">
                        <option value="" selected>เลือกรายการ...</option>
                        <option value="Cancer/Heart Disease">Cancer/Heart Disease</option>
                        <option value="CHF/Stroke/Neurological Disease/Renal Disease">CHF/Stroke/Neurological Disease/Renal Disease</option>
                        <option value="CKD/Liver/COPD/AIDS">CKD/Liver/COPD/AIDS</option>
                        <option value="อื่นๆ">อื่นๆ</option>
                      </select>
                    </div>
                    <div class="col">
                      <label for="f102_chiefCompaint" class="form-label">Chief compaint</label>
                      <input type="text" class="form-control" id="f102_chiefCompaint" name="chiefCompaint" placeholder="Chief compaint..." required />
                    </div>
                    <div class="col">
                      <label for="f102_statusUnderlyingDisease" class="form-label">Status/Underlying disease</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f102_statusUnderlyingDisease"
                        name="statusUnderlyingDisease"
                        placeholder="Status/Underlying disease....."
                      />
                    </div>
                    <div class="col">
                      <label for="f102_pps" class="form-label">PPS</label>
                      <input type="text" class="form-control" id="f102_pps" name="pps" placeholder="PPS....." />
                    </div>
                    <div class="col">
                      <label for="f102_biologicalProblem" class="form-label">Biological problem</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f102_biologicalProblem"
                        name="biologicalProblem"
                        placeholder="Biological problem....."
                      />
                    </div>
                    <div class="col">
                      <label for="f102_psychosocial" class="form-label">Psychosocial</label>
                      <input type="text" class="form-control" id="f102_psychosocial" name="psychosocial" placeholder="Psychosocial....." />
                    </div>
                    <div class="col">
                      <label for="f102_spiritual" class="form-label">Spiritual</label>
                      <input type="text" class="form-control" id="f102_spiritual" name="spiritual" placeholder="Spiritual....." />
                    </div>
                    <div class="col">
                      <label for="f102_ppsAssessment" class="form-label">แบบประเมิน PPS</label>
                      <input type="text" class="form-control" id="f102_ppsAssessment" name="ppsAssessment" placeholder="แบบประเมิน PPS....." />
                    </div>
                    <div class="col">
                      <label for="f102_esasAssessment" class="form-label">แบบประเมินอาการรบกวน ESAS</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f102_esasAssessment"
                        name="esasAssessment"
                        placeholder="แบบประเมินอาการรบกวน ESAS....."
                      />
                    </div>
                  </div>

                  <div class="modal-footer py-3 gap-2">
                    <button type="submit" class="btn-form btn-form-submit">บันทึก</button>
                    <button type="reset" class="btn-form btn-form-cancel" data-bs-dismiss="modal">ยกเลิก</button>
                  </div>
                </div>
              </form>

              <!-- loading data -->
              <div class="loading-data">
                <div class="loader">
                  <div class="loader_overlay"></div>
                  <div class="loader_cogs">
                    <div class="loader_cogs__top">
                      <div class="top_part"></div>
                      <div class="top_part"></div>
                      <div class="top_part"></div>
                      <div class="top_hole"></div>
                    </div>
                    <div class="loader_cogs__left">
                      <div class="left_part"></div>
                      <div class="left_part"></div>
                      <div class="left_part"></div>
                      <div class="left_hole"></div>
                    </div>
                    <div class="loader_cogs__bottom">
                      <div class="bottom_part"></div>
                      <div class="bottom_part"></div>
                      <div class="bottom_part"></div>
                      <div class="bottom_hole"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ฟอร์มการดูแลรักษา id: f200 -->
    <div>
      <!-- Modal Form Family meeting, Advance care plan id: f200 -->
      <div
        class="modal modal-lg fade"
        id="familyMeeting_modal"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="m200_familyMeeting"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header py-3">
              <h5 class="modal-title" id="m200_familyMeeting"><i class="fa-regular fa-pen-to-square"></i> แก้ไขข้อมูล</h5>
              <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body pb-0">
              <form id="f200_FamilyMeeting" onsubmit="">
                <div class="d-flex justify-content-center page-child-icon p-5">
                  <img src="https://lh5.googleusercontent.com/d/1R-_lfnIviohWmYXWK9l3i8K0I-S0oLol" alt="FamilyMeeting" />
                </div>
                <div class="container">
                  <div class="row row-cols-1 row-cols-lg-2 gx-5 gy-3 mb-5 mx-lg-2">
                    <div class="col">
                      <label for="f200_meetingDate" class="form-label">วันที่ Family meeting</label>
                      <div class="input-group">
                        <input
                          type="text"
                          class="date-picker form-control"
                          id="f200_meetingDate"
                          name="meetingDate"
                          placeholder="วันที่, เวลา"
                          readonly
                        />
                      </div>
                    </div>
                    <div class="col">
                      <label for="f200_recognitionDisease" class="form-label">การรับรู้การดำเนินการของโรค</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f200_recognitionDisease"
                        name="recognitionDisease"
                        placeholder="การรับรู้การดำเนินการของโรค......"
                        required
                      />
                    </div>
                    <div class="col">
                      <label for="f200_livingWillDocumentation" class="form-label">Living will documentation</label>
                      <select class="form-select" id="f200_livingWillDocumentation" name="livingWillDocumentation">
                        <option value="" selected>เลือกจากรายการ</option>
                        <option value="1">Yes</option>
                        <option value="2">No</option>
                      </select>
                    </div>
                    <div class="col">
                      <label for="f200_resuscitaionPlanNoETT" class="form-label">Resuscitaion plan</label>
                      <select class="form-select" id="f200_resuscitaionPlanNoETT" name="resuscitaionPlanNoETT">
                        <option value="" selected>เลือกจากรายการ</option>
                        <option value="no ETT">no ETT</option>
                        <option value="no CPR">no CPR</option>
                        <option value="no Inotrope">no Inotrope</option>
                        <option value="no Central line">no Central line</option>
                        <option value="Other">Other</option>
                      </select>
                    </div>
                    <div class="col">
                      <label for="f200_placeOfDeath" class="form-label">Place of death</label>
                      <select class="form-select" id="f200_placeOfDeath" name="placeOfDeath">
                        <option value="" selected>เลือกจากรายการ</option>
                        <option value="Home">Home</option>
                        <option value="Primary ward">Primary ward</option>
                        <option value="Other">Other</option>
                      </select>
                    </div>
                  </div>

                  <div class="modal-footer py-3 gap-2">
                    <button type="submit" class="btn-form btn-form-submit">บันทึก</button>
                    <button type="reset" class="btn-form btn-form-cancel" data-bs-dismiss="modal">ยกเลิก</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Form treatment id: f201 -->
      <div
        class="modal modal-lg fade"
        id="treatment_modal"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="m201_treatmentLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header py-3">
              <h5 class="modal-title" id="m201_treatmentLabel"><i class="fa-regular fa-pen-to-square"></i> แก้ไขข้อมูล</h5>
              <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body pb-0">
              <form id="f201_Treatment" onsubmit="">
                <div class="d-flex justify-content-center page-child-icon p-5">
                  <img src="https://lh5.googleusercontent.com/d/17d-ZvzrG2wzbriB2e7yx7TKt3NXzEw4n" alt="Treatment" />
                </div>
                <div class="container">
                  <div class="row row-cols-1 row-cols-lg-2 gx-5 gy-3 mb-5 mx-lg-2">
                    <div class="col-lg-12">
                      <label for="f201_pcNote" class="form-label">PC note</label>
                      <textarea type="text" class="form-control" id="f201_pcNote" name="pcNote" rows="4" placeholder="PC note..."></textarea>
                    </div>
                    <div class="col">
                      <label for="f201_medicationsUsed" class="form-label">ยาที่ใช้</label>
                      <input type="text" class="form-control" id="f201_medicationsUsed" name="medicationsUsed" placeholder="ยาที่ใช้......" />
                    </div>
                    <div class="col">
                      <label for="f201_issuesSolvedUrgently" class="form-label">ปัญหาที่ต้องการแก้ไขเร่งด่วน</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f201_issuesSolvedUrgently"
                        name="issuesSolvedUrgently"
                        placeholder="ปัญหาที่ต้องการแก้ไขเร่งด่วน..."
                        required
                      />
                    </div>
                    <div class="col">
                      <label for="f201_carePlanCareRoutine" class="form-label">แผนการดูแล/กิจกรรการดูแล</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f201_carePlanCareRoutine"
                        name="carePlanCareRoutine"
                        placeholder="แผนการดูแล/กิจกรรการดูแล..."
                      />
                    </div>
                    <div class="col">
                      <label for="f201_resultsSuggestions" class="form-label">ผลลัพธ์/ข้อเสนอแนะ</label>
                      <input
                        type="text"
                        class="form-control"
                        id="f201_resultsSuggestions"
                        name="resultsSuggestions"
                        placeholder="ผลลัพธ์/ข้อเสนอแนะ..."
                      />
                    </div>
                  </div>

                  <div class="modal-footer py-3 gap-2">
                    <button type="submit" class="btn-form btn-form-submit">บันทึก</button>
                    <button type="reset" class="btn-form btn-form-cancel" data-bs-dismiss="modal">ยกเลิก</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Form Education&training programe id: f202 -->
      <div
        class="modal modal-lg fade"
        id="educationTraining_modal"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="m202_educationTraining_modal"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header py-3">
              <h5 class="modal-title" id="m202_educationTraining_modal"><i class="fa-regular fa-pen-to-square"></i> แก้ไขข้อมูล</h5>
              <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body pb-0">
              <form id="f202_EducationTraining" onsubmit="">
                <div class="d-flex justify-content-center page-child-icon p-5">
                  <img src="https://lh5.googleusercontent.com/d/1JL0sk1J0s5sUpp3VYDfYNAMrTT9yCtq5" alt="EducationTraining" />
                </div>
                <div class="container">
                  <div class="row row-cols-1 row-cols-lg-2 gx-5 gy-3 mb-5 mx-lg-2">
                    <div class="col-lg-12">
                      <label for="f202_trainning" class="form-label">Trainning</label>
                      <select id="f202_trainning" name="trainning" class="form-select" aria-label="Default select example">
                        <option value="" selected>เลือกจากรายการ</option>
                        <option value="ผู้ป่วย">ผู้ป่วย</option>
                        <option value="ญาติ">ญาติ</option>
                        <option value="ผู้ดูแล">ผู้ดูแล</option>
                        <option value="no training">no training</option>
                      </select>
                    </div>
                    <div class="col-lg-12">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="TRUE" id="f202_endOfLifeCare" name="endOfLifeCare" />
                        <label class="form-check-label" for="f202_endOfLifeCare"> End of life care </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="TRUE" id="f202_symptomsNearDeath" name="symptomsNearDeath" />
                        <label class="form-check-label" for="f202_symptomsNearDeath"> อาการที่พบได้เมื่อใกล้เสียชีวิต </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="TRUE" id="f202_relaxation" name="relaxation" />
                        <label class="form-check-label" for="f202_relaxation"> การผ่อนคลายร่างกายและจิตใจ </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="TRUE" id="f202_sideFlip" name="sideFlip" />
                        <label class="form-check-label" for="f202_sideFlip"> การพลิกตะแคงตัวจัดท่า </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="TRUE" id="f202_respiratoryCare" name="respiratoryCare" />
                        <label class="form-check-label" for="f202_respiratoryCare"> การดูแลทางเดินหายใจ </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="TRUE" id="f202_onNgTube" name="onNgTube" />
                        <label class="form-check-label" for="f202_onNgTube"> การดูแลผู้ป่วย on NG-tube </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="TRUE" id="f202_retrainedFoleyCath" name="retrainedFoleyCath" />
                        <label class="form-check-label" for="f202_retrainedFoleyCath"> การดูแลผู้ป่วย Retrained foley's cath </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="TRUE" id="f202_wondCare" name="wondCare" />
                        <label class="form-check-label" for="f202_wondCare"> Wond care </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="TRUE" id="f202_colostomyCare" name="colostomyCare" />
                        <label class="form-check-label" for="f202_colostomyCare"> Colostomy care </label>
                      </div>
                      <div class="mt-3">
                        <label class="form-label" for="f202_other">อื่นๆ</label>
                        <textarea class="form-control" id="f202_other" name="other" rows="4"></textarea>
                      </div>
                    </div>
                  </div>

                  <div class="modal-footer py-3 gap-2">
                    <button type="submit" class="btn-form btn-form-submit">บันทึก</button>
                    <button type="reset" class="btn-form btn-form-cancel" data-bs-dismiss="modal">ยกเลิก</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ฟอร์มการดูแลต่อเนื่อง id: f300 -->
    <div>
      <!-- Modal Form การให้คำปรึกษา โทรติดตาม/Line id: f300 -->
      <div
        class="modal modal-lg fade"
        id="followUp_modal"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="m300_followUpLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header py-3">
              <h5 class="modal-title" id="m300_followUpLabel"><i class="fa-regular fa-pen-to-square"></i> แก้ไขข้อมูล</h5>
              <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body pb-0">
              <form id="f300_FollowUp" onsubmit="">
                <div class="d-flex justify-content-center page-child-icon p-5">
                  <img src="https://lh5.googleusercontent.com/d/1WG05teMtGeslui4cdnhuBFHdy5FchTVH" alt="FollowUp" />
                </div>
                <div class="container">
                  <div class="row row-cols-1 row-cols-lg-2 gx-5 gy-3 mb-5 mx-lg-2">
                    <div class="col">
                      <label for="f300_followUpDate" class="form-label">วันที่ติดตาม ให้คำปรึกษา/เวลา</label>
                      <div class="input-group">
                        <input
                          type="text"
                          class="date-picker form-control"
                          id="f300_followUpDate"
                          name="followUpDate"
                          placeholder="วันที่, เวลา"
                          readonly
                        />
                      </div>
                    </div>
                    <div class="col">
                      <label for="f300_pps50_100" class="form-label">PPS 50-100% ประเมินทุกสัปดาห์</label>
                      <input type="text" class="form-control" id="f300_pps50_100" name="pps50_100" placeholder="" />
                    </div>
                    <div class="col">
                      <label for="f300_pps30_40" class="form-label">PPS 30-40% ประเมินทุก 3 เดือน</label>
                      <input type="text" class="form-control" id="f300_pps30_40" name="pps30_40" placeholder="" />
                    </div>
                    <div class="col">
                      <label for="f300_pps10_20" class="form-label">PPS 10-20% ประเมินทุกวัน</label>
                      <input type="text" class="form-control" id="f300_pps10_20" name="pps10_20" placeholder="" />
                    </div>
                    <div class="col">
                      <label for="f300_ppsPercent" class="form-label">PPS %</label>
                      <input type="text" class="form-control" id="f300_ppsPercent" name="ppsPercent" placeholder="" />
                    </div>
                    <div class="col">
                      <label for="f300_issue" class="form-label">ปัญหา</label>
                      <input type="text" class="form-control" id="f300_issue" name="issue" placeholder="" />
                    </div>
                    <div class="col">
                      <label for="f300_resolve" class="form-label">การแก้ไข</label>
                      <input type="text" class="form-control" id="f300_resolve" name="resolve" placeholder="" />
                    </div>
                    <div class="col">
                      <label for="f300_caring" class="form-label">กิจกรรการดูแล</label>
                      <select class="form-select" id="f300_caring" name="caring">
                        <option value="" selected>เลือกจากรายการ</option>
                        <option value="no ETT">การติดตามอาการ</option>
                        <option value="no CPR">การใช้ยา</option>
                        <option value="no Inotrope">การให้คำแนะนำในการสังเกตุอาการผิดปกติ และการดูแลผู้ป่วย</option>
                        <option value="no Central line">การประเมินผู้ป่วยเมื่อมีการปรับรักษา</option>
                        <option value="Other">การติดตามการนัดหมาย</option>
                        <option value="Other">การดูแลด้านอื่นๆ</option>
                      </select>
                    </div>
                  </div>

                  <div class="modal-footer py-3 gap-2">
                    <button type="submit" class="btn-form btn-form-submit">บันทึก</button>
                    <button type="reset" class="btn-form btn-form-cancel" data-bs-dismiss="modal">ยกเลิก</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Form เยี่ยมบ้าน id: f301 -->
      <div
        class="modal modal-lg fade"
        id="homeVisit_modal"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="m301_homeVisitLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header py-3">
              <h5 class="modal-title" id="m301_homeVisitLabel"><i class="fa-regular fa-pen-to-square"></i> แก้ไขข้อมูล</h5>
              <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body pb-0">
              <form id="f301_HomeVisit" onsubmit="">
                <div class="d-flex justify-content-center page-child-icon p-5">
                  <img src="https://lh5.googleusercontent.com/d/1-PI4l76uMEAGuRWjMnISGT2K37FI8IBT" alt="HomeVisit" />
                </div>
                <div class="container">
                  <div class="row row-cols-1 row-cols-lg-2 gx-5 gy-3 mb-5 mx-lg-2">
                    <div class="col">
                      <label for="f301_homeVisitDate" class="form-label">วันที่เยี่ยมบ้าน/เวลา</label>
                      <div class="input-group">
                        <input
                          type="text"
                          class="date-picker form-control"
                          id="f301_homeVisitDate"
                          name="homeVisitDate"
                          placeholder="วันที่, เวลา"
                          readonly
                        />
                      </div>
                    </div>
                    <div class="col">
                      <label for="f301_homeVisitNo" class="form-label">เยี่ยมบ้านครั้งที่</label>
                      <input type="tel" class="form-control" id="f301_homeVisitNo" name="homeVisitNo" placeholder="" />
                    </div>
                    <div class="col">
                      <label for="f301_ppsPercent" class="form-label">PPS %</label>
                      <input type="text" class="form-control" id="f301_ppsPercent" name="ppsPercent" placeholder="" />
                    </div>
                    <div class="col">
                      <label for="f301_issue" class="form-label">ปัญหา</label>
                      <input type="text" class="form-control" id="f301_issue" name="issue" placeholder="" />
                    </div>
                    <div class="col">
                      <label for="f301_resolve" class="form-label">การแก้ไข</label>
                      <input type="text" class="form-control" id="f301_resolve" name="resolve" placeholder="" />
                    </div>
                    <div class="col">
                      <label for="f301_caring" class="form-label">กิจกรรการดูแล</label>
                      <select class="form-select" id="f301_caring" name="caring">
                        <option value="" selected>เลือกจากรายการ</option>
                        <option value="no ETT">การติดตามอาการ/การจัดการอาหาร</option>
                        <option value="no CPR">การใช้ยา</option>
                        <option value="no Inotrope">การให้คำแนะนำในการสังเกตุอาการผิดปกติ และการดูแลผู้ป่วย</option>
                        <option value="no Central line">การประเมินผู้ป่วยเมื่อมีการปรับรักษา</option>
                        <option value="Other">การทำแผล</option>
                        <option value="Other">การให้คำแนะนำ</option>
                        <option value="Other">การดูแลด้านอื่นๆ</option>
                        <option value="Other">การประคับประคองจิตใจ</option>
                        <option value="Other">ปรึกษาทีมทีเกี่ยวข้อง</option>
                      </select>
                    </div>
                  </div>

                  <div class="modal-footer py-3 gap-2">
                    <button type="submit" class="btn-form btn-form-submit">บันทึก</button>
                    <button type="reset" class="btn-form btn-form-cancel" data-bs-dismiss="modal">ยกเลิก</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- หน้าหลัก, หน้าย่อย -->
    <script>
      const btnPageChild = $('.list-menu-page, .nav-menu-page, .btn-menu-child-page');
      var currentMainPage = 'homepage';
      var currentChildPage = null;

      $(document).ready(function () {
        $(`#${currentMainPage}`).fadeIn(500, function () {
          $(`#${currentChildPage}`).fadeIn(500);
        });

        btnPageChild.click(function () {
          const mainPageId = $(this).data('main-page-id');
          const childPageId = $(this).data('child-page-id');
          changePage(mainPageId, childPageId);
        });

        // Show password
        const toggle_password = document.querySelectorAll('.toggle-password');
        toggle_password.forEach((el) => {
          el.addEventListener('click', () => {
            const input = el.previousElementSibling;
            const type = input.type;
            if (type === 'password') {
              input.type = 'text';
              el.innerHTML = '<i class="fa fa-eye-slash"></i>';
            } else {
              input.type = 'password';
              el.innerHTML = '<i class="fa fa-eye"></i>';
            }
          });
        });
      });

      function changePage(mainPageId, childPageId) {
        if (mainPageId != currentMainPage && (mainPageId === 'homepage' || mainPageId === 'edit_profile')) {
          currentMainPage = mainPageId;
          $('.main-page').hide();
          $(`#${currentMainPage}`).fadeIn('fast');
          $('.section-user-data').slideUp();
        } else if (mainPageId && mainPageId != currentMainPage) {
          currentMainPage = mainPageId;

          $('.main-page').hide();
          $(`#${currentMainPage}`).fadeIn(300, function () {
            currentChildPage = childPageId;
            $('.child-page').hide();
            $(`#${currentChildPage}`).fadeIn(500);
          });
        } else if (childPageId != currentChildPage) {
          currentChildPage = childPageId;
          $('.child-page').hide();
          $(`#${currentChildPage}`).fadeIn(500);
        }

        const pageName = $(`#${currentMainPage}`).data('page-name');
        $('#page_title').text(pageName);
      }
    </script>

    <!-- แถบนำทาง -->
    <script>
      $(document).ready(function () {
        initializeSidebar();
      });

      function initializeSidebar() {
        $('.sidebar-dropdown-menu').slideUp('fast');

        $('.sidebar-menu-item.has-dropdown > a, .sidebar-dropdown-menu-item.has-dropdown > a').click(function (e) {
          e.preventDefault();
          if (!$(this).parent().hasClass('focused')) {
            $(this).parent().parent().find('.sidebar-dropdown-menu').slideUp('fast');
            $(this).parent().parent().find('.has-dropdown').removeClass('focused');
          }
          $(this).next().slideToggle('fast');
          $(this).parent().toggleClass('focused');
        });

        $('.sidebar-toggle').click(function () {
          $('.sidebar').toggleClass('collapsed');
        });

        $('.sidebar-overlay').click(function () {
          $('.sidebar').addClass('collapsed');
          $('.sidebar-dropdown-menu').slideUp('fast');
          $('.sidebar-menu-item.has-dropdown, .sidebar-dropdown-menu-item.has-dropdown').removeClass('focused');
        });

        if (window.innerWidth < 768) {
          $('.sidebar').addClass('collapsed');
        }
      }
    </script>

    <!-- ตั้งค่าตาราง -->
    <script>
      const _emptyTable = `<div class="d-flex flex-column align-items-center">
                  <i class="bi bi-inbox fs-1 text-muted mb-3"></i>
                  <h5 class="text-muted mb-1">ไม่พบข้อมูล</h5>
                  <p class="text-muted small mb-0">ยังไม่มีข้อมูลผู้ใช้งาน</p>
                </div>`;

      const _sZeroRecords = `<div class="d-flex flex-column align-items-center">
        <i class="bi bi-inbox fs-1 text-muted mb-3"></i>
        <h5 class="text-muted mb-1">ไม่พบข้อมูล</h5>
        <p class="text-muted small mb-0">ข้อมูลค้นหาไม่ตรงกับฐานข้อมูล</p>
      </div>`;

      const settings = {
        // กำหนดเมนูแสดงจำนวนแถว
        lengthMenu: [
          [5, 10, 15, 20, 50, 100, -1],
          [5, 10, 15, 20, 50, 100, 'ทั้งหมด'],
        ],

        order: [[1, 'desc']],
        ordering: true,
        iDisplayLength: 20,
        responsive: true,
        scrollX: true,

        columnDefs: [{ orderable: false, targets: 0 }],
        autoWidth: true, // ✅ เปิดให้ปรับขนาดอัตโนมัติ

        //เมนูภาษาไทย
        language: {
          sProcessing: 'กำลังดำเนินการ...',
          sLengthMenu: 'แสดง _MENU_ รายการ',
          sZeroRecords: _sZeroRecords,
          sInfo: 'แสดง _START_ ถึง _END_ จาก _TOTAL_ รายการ',
          sInfoEmpty: 'แสดง 0 ถึง 0 จาก 0 รายการ',
          sInfoFiltered: '(กรองข้อมูลจาก _MAX_ รายการ)',
          sInfoPostFix: '',
          sSearch: 'ค้นหา:',
          sUrl: '',
          emptyTable: _emptyTable,

          // oPaginate: {
          //   sFirst: "หน้าแรก",
          //   sPrevious: "ก่อนหน้า",
          //   sNext: "ถัดไป",
          //   sLast: "หน้าสุดท้าย",
          // },
        },
      };
    </script>

    <!-- ตารางข้อมูล -->
    <script>
      function idCardFormatter(cardId) {
        const id = `${cardId}`;
        console.log(id.length());
        return (formatted = `${id[0]} ${id.slice(1, 5)} ${id.slice(5, 10)} ${id.slice(10, 12)} ${id.slice(12)}`);
      }

      var table = null;
      var count = 0;

      // เพิ่มข้อมูลใหม่
      const img = '<img class="profile-table" src="https://lh5.googleusercontent.com/d/14JrOi6I2qanUTFn4Q_ftHDDkrGGSw8iV" alt />';
      const newData = [img, 'user_name', 'รอดำเนินการ', 'user_', 'user_w', 'หญิง', `${20 + count} ปี`];

      $(document).ready(function () {
        table = new Table('#main_user_data_table', { ...settings });

        // Event เมื่อเลือกรายการจากตาราง
        table.getTable().on('click', 'tbody tr.data-table-row', function () {
          // ดึงข้อมูลแถวที่เลือก
          const data = table.getRowData(this);
          console.log(data);
          const mainPageId = 'patientInformation';
          const childPageId = 'patientInformation_1';
          $('.section-user-data').slideDown();
          changePage(mainPageId, childPageId);
        });
      });

      class Table {
        constructor(tableId, settings, data = []) {
          this.tableId = tableId;
          this.settings = settings;
          this.table = new DataTable(tableId, { ...settings });
          this.data = data;
        }

        getTable() {
          return this.table;
        }
        // ดึงข้อมูลแถว
        getRowData(row) {
          return this.table.row(row).data();
        }
        // เพิ่มแถวข้อมูล
        addRow(data) {
          this.data.push(data);
          let row = this.table.row.add(data).draw().node(); // ดึง `node()` ของแถวที่เพิ่ม

          // เพิ่มคลาสให้แถวใหม่มีเอฟเฟกต์
          $(row).css('opacity', 0).animate({ opacity: 1 }, 500); // เอฟเฟกต์ fade-in
        }
        // แก้ไขแถวข้อมูล
        updateRow(rowIndex, data) {
          this.data[rowIndex] = data;
          this.table.row(rowIndex).data(data).draw();
        }
        // ลบแถวข้อมูล
        deleteRow(rowIndex) {
          this.data.splice(rowIndex, 1);
          this.table.row(rowIndex).remove().draw();
        }
        // จำนวนแถว
        getLength() {
          return this.table.rows().count();
        }
        // ค้นหาข้อมูล
        search(searchQuery) {
          this.table.search(searchQuery).draw();
        }
        //  เรียงข้อมูลตามคลอลั่ม
        sortColumn(columnIndex, order) {
          this.table.order([columnIndex, order]).draw();
        }
        // ดาวโหลด Excel
        exportToExcel() {
          const blob = new Blob([this.table.table().html()], { type: 'text/html' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = 'report.xlsx';
          a.click();
          URL.revokeObjectURL(url);
          a.remove();
        }
        // ดาวโหลด CSV
        exportToCSV() {
          const csv = this.table
            .table()
            .rows()
            .data()
            .map((row) => row.map((cell) => escapeHtml(cell)).join(','))
            .join('\n');
          const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = 'report.csv';
          a.click();
          URL.revokeObjectURL(url);
          a.remove();
        }
        // ล้างข้อมูลตาราง
        clearTable() {
          this.data = [];
          this.table.clear().draw();
        }
      }

      function getStatusBadgeClass(status) {
        return (
          {
            Pending: 'bg-warning',
            Approved: 'bg-success',
            Rejected: 'bg-danger',
            Inactive: 'bg-secondary',
          }[status] || 'bg-secondary'
        );
      }

      function formatDate(dateString) {
        if (!dateString) return '-';
        const date = new Date(dateString);
        if (isNaN(date.getTime())) return dateString;

        return date.toLocaleString('th-TH', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit',
        });
      }

      function escapeHtml(unsafe) {
        return unsafe
          ? String(unsafe).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#039;')
          : '';
      }
    </script>

    <!-- กรองข้อมูล -->
    <script>
      $(document).ready(function () {
        //  กรองข้อมูลเฉพาะคลอลั่ม
        $('input.table_filter').on('keyup click', function () {
          const val = $(this).val();
          table.search(val);
        });

        //  กรองข้อมูลเฉพาะคลอลั่ม
        $('input.column_filter, select.column_filter').on('keyup click change', function () {
          filterColumn($(this).parents('tr').attr('data-column'));
        });

        //  กรองข้อมูลเฉพาะคลอลั่ม **เฉพาะคำที่ตรงกันจริงๆ**
        $('select.column_filter_same').on('change', function () {
          filterColumnSame($(this).parents('div').attr('data-column'));
        });

        $('.ui-menu').on('click', (event) => {
          const val = event.target.innerHTML;
          table.getTable().DataTable().column(1).search(val).draw();
        });

        // รีเซ็ตการกรองข้อมูล
        $('#reset_filter').on('click', (event) => {
          $('input.table_filter').val('');
          $('input.column_filter').val('');
          $('select.column_filter_same').val('');
          $('select.column_filter').val('');
          $('input#service_start_date').val('');
          $('input#service_start_time').val('');
          $('input#until_the_date_of_service').val('');
          $('input#until_the_time_of_service').val('');


          table.getTable().search('');
          table.getTable().columns('').search('').draw();
        });

        //  กรองข้อมูลเฉพาะคลอลั่ม
        function filterColumn(column) {
          const val = $('#col' + column + '_filter').val();
          table.getTable().column(column).search(val).draw();
        }

        //  กรองข้อมูลเฉพาะคลอลั่ม **เฉพาะคำที่ตรงกันจริงๆ**
        function filterColumnSame(column) {
          const val = $('#col' + column + '_filter').val();
          table
            .getTable()
            .column(column - 1)
            .search(val ? '^' + val + '$' : '', true, false)
            .draw();
        }
      });
    </script>

    <!-- MCDatepicker -->
    <script>
      $(document).ready(function () {
        // ตั้งค่าปฏิทิน
        const monthNames = [
          'มกราคม',
          'กุมภาพันธ์',
          'มีนาคม',
          'เมษายน',
          'พฤษภาคม',
          'มิถุนายน',
          'กรกฎาคม',
          'สิงหาคม',
          'กันยายน',
          'ตุลาคม',
          'พฤศจิกายน',
          'ธันวาคม',
        ];
        const dayNames = ['อา.', 'จ.', 'อ.', 'พ.', 'พฤ.', 'ศ.', 'ส.'];
        const datepicker_settings = {
          bodyType: 'inline',
          selectedDate: new Date(),
          dateFormat: 'dd/mm/yyyy',
          customMonths: monthNames,
          customWeekDays: dayNames,
          closeOnBlur: true,
          autoClose: true,
          // minDate: new Date(dateFormat(<?= minDate ?>)),
          // maxDate: new Date(dateFormat(<?= maxDate ?>)),
        };

        const filter_sDate_el = '#service_start_date';
        const filter_sTime_el = '#service_start_time';
        const filter_eDate_el = '#until_the_date_of_service';
        const filter_eTime_el = '#until_the_time_of_service';

        const sDatePicker = MCDatepicker.create({
          el: filter_sDate_el,
          ...datepicker_settings,
        });

        const eDatePicker = MCDatepicker.create({
          el: filter_eDate_el,
          ...datepicker_settings,
        });

        sDatePicker.onSelect((date, formatedDate) => {
          table.getTable().draw();
          const sDate = new Date(date);
          const eDate = new Date(eDatePicker.pickedDate);
          if (sDate > eDate && $(filter_eDate_el).val()) {
            eDatePicker.setFullDate(sDate);
          }

          eDatePicker.prevLimitDate = date;
          // console.log(eDatePicker)
        });

        eDatePicker.onSelect((date, formatedDate) => {
          table.getTable().draw();
        });

        $(`${filter_sTime_el}, ${filter_eTime_el}`).on('input', () => {
          table.getTable().draw();
        });

        // Custom filtering function which will search data in column four between two values
        DataTable.ext.search.push(function (settings, data, dataIndex) {
          const sDate = $(filter_sDate_el).val();
          const sTime = $(filter_sTime_el).val();
          const eDate = $(filter_eDate_el).val();
          const eTime = $(filter_eTime_el).val();

          if (!sDate || !eDate) return true;

          const sDateTime = dateTimeFormat([sDate, sTime ? sTime : '00:00'].join(', '));
          const eDateTime = dateTimeFormat([eDate, eTime ? eTime : '23:59'].join(', '));
          const col_filter = 1;

          const dataDateTime = dateTimeFormat(data[col_filter]);

          return dataDateTime >= sDateTime && dataDateTime <= eDateTime;
        });

        // Convert dd/mm/yyyy HH:MM to a comparable Date object
        function dateTimeFormat(dateTime) {
          if (!dateTime) return null;

          const _date = dateTime.split(', ')[0];
          const _time = dateTime.split(', ')[1];
          const [dd, mm, yyyy] = _date.split('/');
          const [hh, min] = _time.split(':');

          return new Date(yyyy, mm - 1, dd, hh, min); // JS month starts from 0
        }
      });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.6.0/jspdf.plugin.autotable.min.js"></script>
  </body>
</html>
